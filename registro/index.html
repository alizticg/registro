<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Minibuses</title>
    
    <!-- Estilos CSS -->
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/responsive.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üöê Sistema de Gesti√≥n de Minibuses</h1>
            <p>Control de viajes y pasajeros</p>
        </div>

        <div class="content">
            <!-- SECCI√ìN DE LOGIN -->
            <div class="login-section active">
                <div class="card">
                    <h2>Iniciar Sesi√≥n</h2>
                    <div class="form-group">
                        <label>Usuario:</label>
                        <input type="text" id="loginUser" placeholder="Ingrese su usuario">
                    </div>
                    <div class="form-group">
                        <label>Contrase√±a:</label>
                        <input type="password" id="loginPass" placeholder="Ingrese su contrase√±a">
                    </div>
                    <button class="btn btn-primary" onclick="login()">Ingresar</button>
                </div>

                <div class="card">
                    <h3>üë• Usuarios de Prueba</h3>
                    <p><strong>Administrador:</strong> admin / admin123</p>
                    <p><strong>Chofer 1:</strong> chofer1 / chofer123</p>
                    <p><strong>Chofer 2:</strong> chofer2 / chofer123</p>
                    <p><strong>Chofer 3:</strong> chofer3 / chofer123</p>
                </div>
            </div>

            <!-- SECCI√ìN ADMINISTRADOR -->
            <div class="admin-section">
                <div class="user-info">
                    <div>
                        <strong>üë§ Usuario:</strong> <span id="adminName"></span>
                    </div>
                    <button class="btn btn-danger" onclick="logout()">Cerrar Sesi√≥n</button>
                </div>

                <div class="tabs">
                    <button class="tab active" onclick="showTab('registro')">Registrar Pasajero</button>
                    <button class="tab" onclick="showTab('viajes')">Gestionar Viajes</button>
                    <button class="tab" onclick="showTab('busqueda')">Buscar Pasajeros</button>
                    <button class="tab" onclick="showTab('choferes')">Choferes</button>
                </div>

                <!-- TAB: REGISTRO DE PASAJEROS -->
                <div id="tab-registro" class="tab-content active">
                    <div class="card">
                        <h2>Registrar Nuevo Pasajero</h2>
                        <p style="color: #666; margin-bottom: 15px;">‚ö†Ô∏è Los asientos deben ser √∫nicos por viaje (1-14)</p>
                        <div id="alertRegistro"></div>
                        <form onsubmit="registrarPasajero(event)">
                            <div class="form-row">
                                <div class="form-group">
                                    <label>Nombre Completo:</label>
                                    <input type="text" id="nombrePasajero" required>
                                </div>
                                <div class="form-group">
                                    <label>Documento de Identidad:</label>
                                    <input type="text" id="documentoPasajero" required>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label>Tel√©fono:</label>
                                    <input type="tel" id="telefonoPasajero" required>
                                </div>
                                <div class="form-group">
                                    <label>Email:</label>
                                    <input type="email" id="emailPasajero">
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label>Viaje:</label>
                                    <select id="viajeSelect" required>
                                        <option value="">Seleccione un viaje</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>N√∫mero de Asiento (1-14):</label>
                                    <input type="number" id="asientoPasajero" min="1" max="14" required>
                                </div>
                            </div>
                            <button type="submit" class="btn btn-primary">Registrar Pasajero</button>
                        </form>
                    </div>
                </div>

                <!-- TAB: GESTIONAR VIAJES -->
                <div id="tab-viajes" class="tab-content">
                    <div class="card">
                        <h2>Crear Nuevo Viaje</h2>
                        <div id="alertViaje"></div>
                        <form onsubmit="crearViaje(event)">
                            <div class="form-row">
                                <div class="form-group">
                                    <label>Origen:</label>
                                    <input type="text" id="origenViaje" required>
                                </div>
                                <div class="form-group">
                                    <label>Destino:</label>
                                    <input type="text" id="destinoViaje" required>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label>Fecha:</label>
                                    <input type="date" id="fechaViaje" required>
                                </div>
                                <div class="form-group">
                                    <label>Hora:</label>
                                    <input type="time" id="horaViaje" required>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label>Chofer:</label>
                                    <select id="choferViaje" required>
                                        <option value="">Seleccione un chofer</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Placa del Minibus:</label>
                                    <input type="text" id="placaViaje" required>
                                </div>
                            </div>
                            <button type="submit" class="btn btn-primary">Crear Viaje</button>
                        </form>
                    </div>

                    <div class="card">
                        <h2>Viajes Programados</h2>
                        <p style="color: #666; margin-bottom: 10px;">üí° Los viajes pasados pueden ser eliminados</p>
                        <div id="listaViajes" class="trip-list"></div>
                    </div>
                </div>

                <!-- TAB: BUSCAR PASAJEROS -->
                <div id="tab-busqueda" class="tab-content">
                    <div class="card">
                        <h2>Buscar y Gestionar Pasajeros</h2>
                        <p style="color: #666; margin-bottom: 15px;">üîç Busca y elimina pasajeros desde aqu√≠</p>
                        <div class="search-box">
                            <div class="form-group">
                                <label>Buscar por nombre o documento:</label>
                                <input type="text" id="searchInput" placeholder="Ingrese nombre o documento" oninput="buscarPasajeros()">
                            </div>
                        </div>
                        <div id="resultadosBusqueda" class="passenger-list"></div>
                    </div>
                </div>

                <!-- TAB: CHOFERES -->
                <div id="tab-choferes" class="tab-content">
                    <div class="stats">
                        <div class="stat-card">
                            <h3 id="totalChoferes">3</h3>
                            <p>Total Choferes</p>
                        </div>
                        <div class="stat-card">
                            <h3 id="totalViajes">0</h3>
                            <p>Viajes Activos</p>
                        </div>
                        <div class="stat-card">
                            <h3 id="totalPasajeros">0</h3>
                            <p>Pasajeros</p>
                        </div>
                    </div>

                    <div class="card">
                        <h2>Agregar Nuevo Chofer</h2>
                        <p style="color: #666; margin-bottom: 15px;">M√°ximo 20 choferes en total</p>
                        <div id="alertChofer"></div>
                        <form onsubmit="agregarChofer(event)">
                            <div class="form-row">
                                <div class="form-group">
                                    <label>Nombre Completo:</label>
                                    <input type="text" id="nombreChofer" required>
                                </div>
                                <div class="form-group">
                                    <label>Usuario:</label>
                                    <input type="text" id="usuarioChofer" required placeholder="ej: chofer4">
                                </div>
                            </div>
                            <div class="form-group">
                                <label>Contrase√±a:</label>
                                <input type="password" id="passwordChofer" required>
                            </div>
                            <button type="submit" class="btn btn-primary">‚ûï Agregar Chofer</button>
                        </form>
                    </div>

                    <div class="card">
                        <h2>Lista de Choferes</h2>
                        <div id="listaChoferes"></div>
                    </div>
                </div>
            </div>

            <!-- SECCI√ìN CHOFER -->
            <div class="driver-section">
                <div class="user-info">
                    <div>
                        <strong>üöê Chofer:</strong> <span id="driverName"></span>
                    </div>
                    <button class="btn btn-danger" onclick="logout()">Cerrar Sesi√≥n</button>
                </div>

                <div class="card">
                    <h2>Mis Viajes Asignados</h2>
                    <div id="viajesChofer"></div>
                </div>

                <div class="card">
                    <h2>Buscar Pasajero</h2>
                    <div class="form-group">
                        <input type="text" id="searchDriverInput" placeholder="Buscar por nombre o documento" oninput="buscarPasajerosChofer()">
                    </div>
                    <div id="resultadosBusquedaChofer"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts JavaScript -->
    <script type="module" src="js/config.js"></script>
    <script type="module" src="js/utils.js"></script>
    <script type="module" src="js/auth.js"></script>
    <script type="module" src="js/admin.js"></script>
    <script type="module" src="js/driver.js"></script>
</body>
</html>